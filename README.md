# ğŸ§¾ Filesure ADT-1 Assignment

This project automates the extraction and summarization of information from Form ADT-1 PDFs, including their attachments. The workflow uses OCR and LLMs (OpenAI) to overcome limitations in scanned or poorly formatted PDFs. The process is now fully reproducible and version-controlled using **DVC**.

---

## ğŸ“ Project Structure

```
filesure-adt1-assignment/
â”‚
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ attachments/               # Extracted PDF attachments (from the main ADT-1 PDF)
â”‚   â”œâ”€â”€ processed/                 # Final structured output (e.g. JSON file)
â”‚   â”œâ”€â”€ raw/                       # Input PDF (Form ADT-1)
                   
â””â”€â”€ reports/                   # Markdown/text summaries generated by LLM
â”‚   â”œâ”€â”€ attachments_file_summary.md
    â”œâ”€â”€ summary.txt

â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ extractor.py               # Extracts structured data from the main ADT-1 PDF using OCR
â”‚   â”œâ”€â”€ summary_generator.py       # Generates a human-readable summary from the extracted data
â”‚   â”œâ”€â”€ attachment_parser.py       # Extracts embedded attachments from the main ADT-1 PDF
â”‚   â””â”€â”€ attachment_files_summary.py # Summarizes each extracted attachment using OpenAI
â”‚
â”œâ”€â”€ .dvcignore          # Files to ignore during DVC tracking
â”œâ”€â”€ .gitignore          # Files to ignore during Git tracking
â”œâ”€â”€ requirements.txt    # Python dependencies
â”œâ”€â”€ dvc.yaml            # DVC pipeline definition
â”œâ”€â”€ dvc.lock            # DVC pipeline lock file
â”œâ”€â”€ errors.log          # Logs errors during pipeline execution
â”œâ”€â”€ README.md           # Project instructions and overview
â”‚
â””â”€â”€ .env                           # My OpenAI API key (not shared)
```



---

## âš™ï¸ Workflow Overview (via DVC)

### ğŸ”¹ 1. **Extract Embedded Attachments**
**File:** `src/attachment_parser.py`

- Scans the original ADT-1 PDF (`data/raw/Form ADT-1-29092023_signed.pdf`) for embedded files.
- Extracts and saves each embedded attachment into: `data/attachments/`

---

### ğŸ”¹ 2. **Extract Main Data from ADT-1 PDF**
**File:** `src/extractor.py`

- Converts the main ADT-1 PDF into images using `pdf2image`, then performs OCR using `pytesseract`.
- Extracts structured data fields using regular expressions.
- Output is saved as: `data/processed/output.json`

---

### ğŸ”¹ 3. **Generate Summary of Main ADT-1 Form**
**File:** `src/summary_generator.py`

- Reads the structured data from `data/processed/output.json`.
- Sends the information to OpenAI GPT-4o to generate a readable, formal summary.
- Output summary saved at: `reports/summary.txt`

---

### ğŸ”¹ 4. **Summarize Each Extracted Attachment**
**File:** `src/attachment_files_summary.py`

- Loops through each file in `data/attachments/`, applies OCR, and summarizes the content using OpenAI.
- All summaries are saved together in: `reports/attachments_file_summary.md`

---

## ğŸ›  How to Run the Project

### Step 1: Set Up Environment
Install dependencies:

```bash
pip install -r requirements.txt
```

### Step 2: Add Your OpenAI API Key
Create a `.env` file in the root directory:

```bash
OPENAI_API_KEY=sk-proj-xxxxxxxxxxxxxxxxxxxxxxxxxxxx
```

### Step 3: Run the Full Pipeline with DVC

```bash
dvc repro
```

Or run individual steps manually if needed:

```bash
python src/attachment_parser.py
python src/extractor.py
python src/summary_generator.py
python src/attachment_files_summary.py
```

---

## ğŸ“¦ Output Files

- `data/processed/output.json` â€“ structured data from main PDF
- `reports/summary.txt` â€“ summary of the main ADT-1 form
- `reports/attachments_file_summary.md` â€“ summaries for all embedded PDFs

---

## ğŸ’¡ Notes

- OCR was chosen over direct PDF parsing because the scanned text had inconsistent structure using PyMuPDF.
- This pipeline provides clarity, automation, and auditability using **DVC**.
- The output is especially useful for legal, audit, and compliance documentation.

